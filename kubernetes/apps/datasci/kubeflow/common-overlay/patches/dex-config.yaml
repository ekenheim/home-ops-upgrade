apiVersion: v1
kind: ConfigMap
metadata:
  name: dex
  namespace: auth
data:
  config.yaml: |
    issuer: https://kubeflow.istio.local/dex
    storage:
      type: kubernetes
      config:
        inCluster: true
    web:
      http: 0.0.0.0:5556
    logger:
      level: "debug"
      format: text
    oauth2:
      skipApprovalScreen: true
    enablePasswordDB: true
    staticPasswords:
      # Password: password (bcrypt hash)
      - email: admin@admin.com
        hash: "$2y$12$4K/VkmDd1q1Orber3bT9ZOV0.5mXU7LqnODIz6Lz3XRnZKqbvI7a."
        username: admin
        userID: "15841185641784"
      - email: user1@example.com
        hash: "$2y$12$4K/VkmDd1q1Orber3bT9ZOV0.5mXU7LqnODIz6Lz3XRnZKqbvI7a."
        username: user1
        userID: "15841185641785"
      - email: user2@example.com
        hash: "$2y$12$4K/VkmDd1q1Orber3bT9ZOV0.5mXU7LqnODIz6Lz3XRnZKqbvI7a."
        username: user2
        userID: "15841185641786"
    staticClients:
      - id: kubeflow-oidc-authservice
        redirectURIs: ["/oauth2/callback"]
        name: 'Dex Login Application'
        secret: pUBnBOY80SnXgjibTYM9ZWNzY2xreNGQok
    connectors: []
